(()=>{const e=new Quill("#message_quill",{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","image","video"],[{header:1},{header:2}],[{direction:"rtl"}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["link","image"].clean]},theme:"snow"});"undefined"!=typeof content&&e.setContents(content);const l=$('[name="drivers[]"]'),t=$("#carrier_id"),a=$("#zone_id"),r=$("#turn_id");let n=null,c=null,s=null;t.select2({ajax:{url:"/carrier/selection",data:e=>({search:e.term,page:e.page||1,take:15})},placeholder:"Select",allowClear:!0}).on("select2:select",(e=>{n=e.params.data.id,l.val("").trigger("change")})).on("select2:unselect",(()=>{n=null})),a.select2({ajax:{url:"/zone/selection",data:e=>({search:e.term,page:e.page||1,take:15})},placeholder:"Select",allowClear:!0}).on("select2:select",(e=>{c=e.params.data.id,l.val("").trigger("change")})).on("select2:unselect",(()=>{c=null})),r.select2({placeholder:"Select",allowClear:!0}).on("select2:select",(e=>{s=e.params.data.id,l.val("").trigger("change")})).on("select2:unselect",(()=>{s=null})),l.select2({ajax:{url:"/driver/selection",data:e=>({search:e.term,page:e.page||1,take:15,carrier:n,zone:c,turn:s})},placeholder:"Select",allowClear:!0}),$("form").submit((t=>{t.preventDefault();const a=$(t.currentTarget),r=JSON.stringify(e.getContents());$.ajax({url:a.attr("action"),type:"POST",data:{title:$("#title").val(),carrier:n,zone:c,turn:s,drivers:l.val(),message:r},success:e=>{e.success?window.location="/notification/index":throwErrorMsg()},error:e=>{let l='<ul class="text-left">';Object.values(e.responseJSON.errors).forEach((e=>{l+=`<li>${e}</li>`})),l+="</ul>",throwErrorMsg(l,{timer:!1})}})}))})();
