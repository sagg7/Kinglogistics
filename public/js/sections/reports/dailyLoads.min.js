(()=>{let e=null;const t=$("#dateRange"),a=$("#graphType"),r=$("#shipper_id"),s=$("#period"),o=(o=t.data().daterangepicker.startDate,l=t.data().daterangepicker.endDate)=>{$.ajax({url:"/report/dailyLoadsData",type:"GET",data:{start:o.format("YYYY/MM/DD"),end:l.format("YYYY/MM/DD"),graph_type:a.val(),shipper:r.val(),period:s.val()},success:t=>{(t=>{let r;switch(a.val()){default:case"trips":r="Finished loads per job";break;case"shippers":r="Finished loads per customer";break;case"total":r="Finished loads total"}const s={series:t.series,chart:{height:350,type:"line",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},dataLabels:{enabled:!0},stroke:{curve:"smooth"},title:{text:r,align:"left"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.5}},markers:{size:1},xaxis:{categories:t.categories,title:{text:"Day"}},yaxis:{title:{text:"Loads"}},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}};e?e.updateOptions(s):(e=new ApexCharts(document.querySelector("#chart"),s),e.render())})(t)}})};t.daterangepicker({format:"YYYY/MM/DD",startDate:moment().startOf("month"),endDate:moment().endOf("month")},((e,t,a)=>{o(e,t)})),o(),a.select2().on("select2:select",(()=>{o()})),s.select2().on("select2:select",(()=>{o()})),r.select2({ajax:{url:"/shipper/selection",data:e=>({search:e.term,page:e.page||1,take:15})},placeholder:"Select",allowClear:!0}).on("select2:select",(()=>{o()})).on("select2:unselect",(()=>{o()}))})();
