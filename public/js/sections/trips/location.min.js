(()=>{const o="undefined"==typeof readOnly,t=$("[name=coords]"),e=$("#lat"),a=$("#lng"),n=new google.maps.Map(document.getElementById("map"),{center:{lat:39.8097343,lng:-98.5556199},zoom:5,disableDefaultUI:!0,zoomControl:!0,fullscreenControl:!0});let l=o=>{o?throwErrorMsg("Error: The Geolocation service failed."):throwErrorMsg("Error: Your browser doesn't support geolocation.")};const r=new google.maps.Marker({map:n,draggable:o,animation:google.maps.Animation.DROP}),s=(o,t)=>{const n=o.split(",");t.setPosition({lat:Number(n[0]),lng:Number(n[1])}),e.val(n[0]),a.val(n[1])};if(t.change((()=>{s(t.val(),r)})),""!==t.val()&&s(t.val(),r),o){const o=document.createElement("button"),s=(o,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const a={lat:e.coords.latitude,lng:e.coords.longitude};o.setPosition(a),t.setCenter(a)}),(()=>{l(!0)})):l(!1)};o.className="custom-map-control-button",o.innerHTML='<i class="feather icon-crosshair"></i>',o.type="button",n.controls[google.maps.ControlPosition.TOP_RIGHT].push(o),o.addEventListener("click",(()=>{s(r,n)})),n.addListener("click",(o=>{r.setPosition(o.latLng);const t=r.getPosition();e.val(t.lat()),a.val(t.lng())}));const i=()=>{r.setPosition({lat:Number(e.val()),lng:Number(a.val())})};e.change((()=>{var o;o=e.val(),isFinite(o)&&Math.abs(o)<=90?a.val()&&i():throwErrorMsg("The latitud value is not valid")})),a.change((()=>{var o;o=a.val(),isFinite(o)&&Math.abs(o)<=180?e.val()&&i():throwErrorMsg("The longitude value is not valid")})),$("#coordsForm").submit((o=>{const e=r.getPosition();t.val(`${e.lat()},${e.lng()}`)}))}})();
