const loadSummary=[];(()=>{$.ajax({url:"/dashboard/getData",type:"GET",success:t=>{t.loads&&Object.entries(t.loads).forEach((t=>{const[r,a]=t,d=new CountUp(`${r}_summary`,a);d.error?console.error(d.error):d.start(),loadSummary.push({status:r,count:a})}))},error:()=>{throwErrorMsg()}});const t=t=>{const r=$("#viewLoadStatus"),a=r.find(".modal-title"),d=r.find(".modal-body"),e=d.find(".modal-spinner"),o=d.find(".content-body");e.removeClass("d-none"),o.addClass("d-none"),o.html('<div class="table-responsive"><table class="table table-hover" id="loadTableSummary"><thead><tr><th>Shipper</th><th>Origin</th><th>Destination</th><th>Driver</th><th>Truck#</th>'+("carrier"!==guard?"<th>Carrier</th>":"")+"</tr></thead><tbody></tbody></table></div>");const s=$("#loadTableSummary").find("tbody");var n;a.text(`${n=t.status,n.charAt(0).toUpperCase()+n.slice(1)}`);let i="";t.data.forEach((t=>{i+=`<tr><td>${t.shipper.name}</td><td>${t.origin}</td><td>${t.destination}</td><td>${t.driver.name}</td><td>${t.truck.number}</td>`+("carrier"!==guard?`<td>${t.driver.carrier.name}</td></tr>`:"")})),s.html(i),e.addClass("d-none"),o.removeClass("d-none"),r.modal("show")};$('[id*="_summary"]').click((r=>{r.preventDefault(),r.stopPropagation();const a=$(r.currentTarget).attr("id").split("_")[0],d=loadSummary.find((t=>t.status===a));d&&(d.data?t(d):$.ajax({url:"/dashboard/loadSummary",data:{status:a},success:r=>{d.data=r,t(d)},error:()=>{throwErrorMsg()}}))}))})();
