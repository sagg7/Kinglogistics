(()=>{const a=$("#morningTable"),t=$("#nightTable"),e="#driverStatusModal",r=$(e);$.ajax({url:"/driver/search",data:{dispatch:!0,count:!0},success:r=>{const d=a.find("tbody");d.empty(),d.append(`<tr><td><a class="d-block" id="morning_active" href="${e}" data-toggle="modal" data-target="${e}">${r.morning.active}</a></td><td><a class="d-block" id="morning_inactive" href="${e}" data-toggle="modal" data-target="${e}">${r.morning.inactive}</a></td><td><a class="d-block" id="morning_awaiting" href="${e}" data-toggle="modal" data-target="${e}">${r.morning.awaiting}</a></td><td><a class="d-block" id="morning_loaded" href="${e}" data-toggle="modal" data-target="${e}">${r.morning.loaded}</a></td></tr>`);const i=t.find("tbody");i.empty(),i.append(`<tr><td><a class="d-block" id="night_active" href="${e}" data-toggle="modal" data-target="${e}">${r.night.active}</a></td><td><a class="d-block" id="night_inactive" href="${e}" data-toggle="modal" data-target="${e}">${r.night.inactive}</a></td><td><a class="d-block" id="night_awaiting" href="${e}" data-toggle="modal" data-target="${e}">${r.night.awaiting}</a></td><td><a class="d-block" id="night_loaded" href="${e}" data-toggle="modal" data-target="${e}">${r.night.loaded}</a></td></tr>`)},error:()=>{throwErrorMsg()}});let d=null,i=null;const l=a=>a.value?a.value.name:"",o=a=>a.data&&a.data.carrier.phone?a.data.carrier.phone:"",n=a=>a.data&&a.data.truck&&a.data.truck.trailer?a.data.truck.trailer.number:"";r.on("show.modal.bs",(a=>{const t=$(a.relatedTarget).attr("id");d=t.split("_"),i?i.searchQueryParams.type!==d&&(i.searchQueryParams.type=d,i.updateSearchQuery()):i=new tableAG({container:"driverStatusTable",columns:[{headerName:"Chassis NÂº",field:"trailer",valueFormatter:n},{headerName:"Driver",field:"name"},{headerName:"Phone",field:"phone"},{headerName:"Carrier",field:"carrier",valueFormatter:l},{headerName:"Carrier phone",field:"carrier_phone",valueFormatter:o}],gridOptions:{components:{tableRef:"tbDriverStatus"}},url:"/driver/search",searchQueryParams:{dispatch:!0,type:d}})}))})();
