let originsAGTable,destinationsAGTable;(()=>{const e=e=>{this.eGui=document.createElement("div");let t=0;return e.value&&e.value.forEach((e=>{t+=e.loads_count})),t},t=e=>{this.eGui=document.createElement("div");let t=0;return e.value&&e.value.forEach((e=>{t+=e.loads_tons_sum})),t},a=e=>e.value?e.value.charAt(0).toUpperCase()+e.value.slice(1)+` ${e.data.status_current} of ${e.data.status_total}`:"";function i(){}i.prototype.init=e=>{this.eGui=document.createElement("div");const t=e.value,a=t.split(","),i=Number(a[0]).toFixed(5),o=Number(a[1]).toFixed(5);this.eGui.innerHTML=`<a href="http://www.google.com/maps/place/${t}" target="_blank">${i},${o}</a>`},i.prototype.getGui=()=>this.eGui;const o=o=>{let s=[{headerName:"Coordinates",field:"coords",cellRenderer:i},{headerName:"Name",field:"name"},{headerName:"Total loads",field:"trips",filter:!1,sortable:!1,valueFormatter:e},{headerName:"Total tons delivered",field:"trips",filter:!1,sortable:!1,valueFormatter:t}];switch(o){case"origins":break;case"destinations":s.push({headerName:"Status",field:"status",filter:!1,sortable:!1,valueFormatter:a})}return{columns:s,container:`${o}Table`,tableRef:`${o}AGTable`,url:`/trip/${o.slice(0,-1)}/search`}},s=$("#viewOriginsModal"),l=$("#viewDestinationsModal");s.on("show.modal.bs",(()=>{originsAGTable||(originsAGTable=new tableAG(o("origins")))})).on("shown.modal.bs",(()=>{originsAGTable.gridOptions.api.sizeColumnsToFit()})),l.on("show.modal.bs",(()=>{destinationsAGTable||(destinationsAGTable=new tableAG(o("destinations")))})).on("shown.modal.bs",(()=>{destinationsAGTable.gridOptions.api.sizeColumnsToFit()}))})();
