(()=>{const e=$("#date"),o=initPickadate(e).pickadate("picker"),t=$("#load_type_id"),a=$("#load_type_shipper"),l=$("#shipper_id"),n="undefined"==typeof readOnly;if(n){let n=null;t.select2({ajax:{url:"/loadType/selection",data:e=>({search:e.term,page:e.page||1,take:15,shipper:n})},placeholder:"Select",allowClear:!0}),l.length>0&&(l.select2({ajax:{url:"/shipper/selection",data:e=>({search:e.term,page:e.page||1,take:15})},placeholder:"Select",allowClear:!0}).on("select2:select",(e=>{n=e.params.data.id,a.val(n),t.prop("disabled",!1).trigger("change")})).on("select2:unselect",(()=>{a.val(""),t.val("").prop("disabled",!0).trigger("change")})),t.val()||t.prop("disabled",!0).trigger("change")),o.set("select",e.val(),{format:"yyyy/mm/dd"}),$("#deleteLoadType").on("show.bs.modal",(e=>{let o=$("#load_type_id").html(),t=$("#delete_type");deleteHandler(t,o)}))}const i=$("[name=origin_coords]"),r=$("[name=destination_coords]"),s={center:{lat:39.8097343,lng:-98.5556199},zoom:5,disableDefaultUI:!0,zoomControl:!0,fullscreenControl:!0},c=new google.maps.Map(document.getElementById("mapOrigin"),s),d=new google.maps.Map(document.getElementById("mapDestination"),s);let g=e=>{e?throwErrorMsg("Error: Hay un error con el servicio de geolocalización."):throwErrorMsg("Error: Tu navegador no soporta el servicio de geolocalización.")};const p=new google.maps.Marker({map:c,draggable:n,animation:google.maps.Animation.DROP}),m=new google.maps.Marker({map:d,draggable:n,animation:google.maps.Animation.DROP}),u=(e,o)=>{const t=e.split(",");o.setPosition({lat:Number(t[0]),lng:Number(t[1])})};if(""!==i.val()&&u(i.val(),p),""!==r.val()&&u(r.val(),m),n){const e=document.createElement("button"),o=(e,o)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((t=>{const a={lat:t.coords.latitude,lng:t.coords.longitude};e.setPosition(a),o.setCenter(a)}),(()=>{g(!0)})):g(!1)};e.className="custom-map-control-button",e.innerHTML='<i class="feather icon-crosshair"></i>',c.controls[google.maps.ControlPosition.TOP_RIGHT].push(e),e.addEventListener("click",(()=>{o(p,c)}));const t=e.cloneNode(!0);d.controls[google.maps.ControlPosition.TOP_RIGHT].push(t),t.addEventListener("click",(()=>{o(m,d)})),c.addListener("click",(e=>{p.setPosition(e.latLng)})),d.addListener("click",(e=>{m.setPosition(e.latLng)})),$("#loadForm").submit((e=>{const o=p.getPosition(),t=m.getPosition();i.val(`${o.lat()},${o.lng()}`),r.val(`${t.lat()},${t.lng()}`)}))}})();
