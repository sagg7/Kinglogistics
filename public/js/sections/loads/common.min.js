(()=>{const e=$("#date"),a=initPickadate(e).pickadate("picker"),t=$("#load_type_id"),r=$("#load_type_shipper"),l=$("#shipper_id"),i=$("#trip_id"),d=$("#customer_name"),p=$("#origin"),o=$("[name=origin_coords]"),n=$("#destination"),s=$("[name=destination_coords]"),g=$("#mileage");if("undefined"==typeof readOnly){let c=l.length>0?l.val():null;t.select2({ajax:{url:"/loadType/selection",data:e=>({search:e.term,page:e.page||1,take:15,shipper:c})},placeholder:"Select",allowClear:!0}),i.select2({ajax:{url:"/trip/selection",data:e=>({search:e.term,page:e.page||1,take:15,shipper:c})},placeholder:"Select",allowClear:!0}).on("select2:select",(e=>{$.ajax({url:"/trip/getTrip",type:"GET",data:{id:e.params.data.id},success:e=>{p.val(e.trip_origin?e.trip_origin.name:""),o.val(e.trip_origin?e.trip_origin.coords:"").trigger("change"),n.val(e.trip_destination?e.trip_destination.name:""),s.val(e.trip_destination?e.trip_destination.coords:"").trigger("change"),d.val(e.customer_name),g.val(e.mileage)},error:()=>{throwErrorMsg()}})})),l.length>0&&(l.select2({ajax:{url:"/shipper/selection",data:e=>({search:e.term,page:e.page||1,take:15})},placeholder:"Select",allowClear:!0}).on("select2:select",(e=>{c=e.params.data.id,r.val(c),t.prop("disabled",!1).trigger("change"),i.prop("disabled",!1).trigger("change")})).on("select2:unselect",(()=>{r.val(""),t.val("").prop("disabled",!0).trigger("change"),i.val("").prop("disabled",!0).trigger("change")})),t.val()||t.prop("disabled",!0).trigger("change")),a.set("select",e.val(),{format:"yyyy/mm/dd"}),$("#deleteLoadType").on("show.bs.modal",(e=>{let a=$("#load_type_id").html(),t=$("#delete_type");deleteHandler(t,a)})),l.length>0&&!l.val()&&i.prop("disabled",!0).trigger("change")}})();
