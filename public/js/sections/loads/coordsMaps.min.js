(()=>{const o="undefined"==typeof readOnly,e=$("[name=origin_coords]"),n=$("[name=destination_coords]"),t={center:{lat:39.8097343,lng:-98.5556199},zoom:5,disableDefaultUI:!0,zoomControl:!0,fullscreenControl:!0},a=new google.maps.Map(document.getElementById("mapOrigin"),t),i=new google.maps.Map(document.getElementById("mapDestination"),t);let l=o=>{o?throwErrorMsg("Error: Hay un error con el servicio de geolocalización."):throwErrorMsg("Error: Tu navegador no soporta el servicio de geolocalización.")};const r=new google.maps.Marker({map:a,draggable:o,animation:google.maps.Animation.DROP}),s=new google.maps.Marker({map:i,draggable:o,animation:google.maps.Animation.DROP}),g=(o,e)=>{const n=o.split(",");e.setPosition({lat:Number(n[0]),lng:Number(n[1])})};if(e.change((()=>{g(e.val(),r)})),n.change((()=>{g(n.val(),s)})),""!==e.val()&&g(e.val(),r),""!==n.val()&&g(n.val(),s),o){const o=document.createElement("button"),t=(o,e)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition((n=>{const t={lat:n.coords.latitude,lng:n.coords.longitude};o.setPosition(t),e.setCenter(t)}),(()=>{l(!0)})):l(!1)};o.className="custom-map-control-button",o.innerHTML='<i class="feather icon-crosshair"></i>',a.controls[google.maps.ControlPosition.TOP_RIGHT].push(o),o.addEventListener("click",(()=>{t(r,a)}));const g=o.cloneNode(!0);i.controls[google.maps.ControlPosition.TOP_RIGHT].push(g),g.addEventListener("click",(()=>{t(s,i)})),a.addListener("click",(o=>{r.setPosition(o.latLng)})),i.addListener("click",(o=>{s.setPosition(o.latLng)})),$("#loadForm").submit((o=>{const t=r.getPosition(),a=s.getPosition();e.val(`${t.lat()},${t.lng()}`),n.val(`${a.lat()},${a.lng()}`)}))}})();
