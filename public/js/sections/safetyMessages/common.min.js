(()=>{const e=new Quill("#message_quill",{modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],["link","image","video"],[{header:1},{header:2}],[{direction:"rtl"}],[{header:[1,2,3,4,5,6,!1]}],[{align:[]}],["link","image"],["clean"]]},theme:"snow"});"undefined"!=typeof content&&e.setContents(content);const l=$('[name="drivers[]"]'),a=$("#carrier_id"),t=$("#zone_id"),r=$("#turn_id");let s=null,n=null,c=null;a.select2({ajax:{url:"/carrier/selection",data:e=>({search:e.term,page:e.page||1,take:15})},placeholder:"Select",allowClear:!0}).on("select2:select",(e=>{s=e.params.data.id,l.val("").trigger("change")})).on("select2:unselect",(()=>{s=null})),t.select2({ajax:{url:"/zone/selection",data:e=>({search:e.term,page:e.page||1,take:15})},placeholder:"Select",allowClear:!0}).on("select2:select",(e=>{n=e.params.data.id,l.val("").trigger("change")})).on("select2:unselect",(()=>{n=null})),r.select2({placeholder:"Select",allowClear:!0}).on("select2:select",(e=>{c=e.params.data.id,l.val("").trigger("change")})).on("select2:unselect",(()=>{c=null})),l.select2({ajax:{url:"/driver/selection",data:e=>({search:e.term,page:e.page||1,take:15,carrier:s,zone:n,turn:c})},placeholder:"Select",allowClear:!0}),$("#messageForm").submit((s=>{s.preventDefault();const n=$(s.currentTarget),c=JSON.stringify(e.getContents());$.ajax({url:n.attr("action"),type:"POST",data:{title:$("#title").val(),carrier:a.val(),zone:t.val(),turn:r.val(),drivers:l.val(),message:c},success:e=>{e.success?window.location="/safetyMessage/index":throwErrorMsg()},error:e=>{let l='<ul class="text-left">';Object.values(e.responseJSON.errors).forEach((e=>{l+=`<li>${e}</li>`})),l+="</ul>",throwErrorMsg(l,{timer:!1})}})}))})();
