(()=>{const e=$("#advancedTemplate"),t=e.find(":input"),a=$("#simpleTemplate"),l=a.find(":input"),s=$("#mode"),i=$("#type"),n=$("#shipper_id"),d=$("#shareCheck"),r=s=>{switch(s){case"0":l.prop("disabled",!1),t.prop("disabled",!0),a.removeClass("d-none"),e.addClass("d-none");break;case"1":l.prop("disabled",!0),t.prop("disabled",!1),a.addClass("d-none"),e.removeClass("d-none")}},c=()=>{if("driver"===i.val())n.prop("disabled",!1),d.removeClass("d-none");else d.addClass("d-none"),n.prop("disabled",!0)};s.select2({placeholder:"Select"}).on("select2:select",(e=>{r(e.params.data.id)})),i.select2({placeholder:"Select"}).on("select2:select",(e=>{c()})),l.change((e=>{const t=e.currentTarget,a=t.files,l=$(t).prev();a.length>0?l.text(a[0].name):l.text("Upload file")})),n.select2({ajax:{url:"/shipper/selection",data:e=>({search:e.term,page:e.page||1,take:15})},placeholder:"Select",allowClear:!0}),r(s.val()),c();const o=$("#imagesInput"),p=$("#imagesList"),m=e=>{const t=document.querySelector(`#${e}`);t.addEventListener("click",(()=>{window.getSelection().selectAllChildren(t),document.execCommand("copy")}))};p.find("li").each(((e,t)=>{m(t.firstElementChild.getAttribute("id"))})),o.change((e=>{let t=0;const a=p.find("code:not(.new_img)").parent();if(a.length>0){const e=a[a.length-1].firstElementChild.getAttribute("id");t=e.split("_")[1]}p.find(".new_img").parent().remove();const l=e.currentTarget.files;Array.from(l).forEach(((e,a)=>{t++;const l=`img_${t}`;p.append(`<li><code id="${l}" class="new_img">{{"image":"${t}"}}</code></li>`),m(l)}))})),$(".deleteImage").click((e=>{const t=$(e.currentTarget),a=t.closest("li"),l=t.data("imageid");confirmMsg({config:{title:"Confirm deleting the image file?"},onConfirm:()=>{$.ajax({url:"/paperwork/deleteImage",type:"POST",data:{id:l},success:e=>{e.success&&a.remove()},error:()=>{throwErrorMsg()}})}})}))})();
